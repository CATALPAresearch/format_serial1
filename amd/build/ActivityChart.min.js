define(["jquery"],function(a){var b="",c=["#004C97","#004C97","#004C97","#004C97","#004C97","#004C97","#004C97"],d={viewed:"betrachtet",updates:"bearbeitet",deleleted:"gel√∂scht",created:"erstellt"},e={mod_forum:"Forum",mod_glossary:"Glossar",mod_wiki:"Wiki",mod_assignment:"Aufgabe",mod_studentquiz:"StudentQuiz",mod_quiz:"Quiz"},f=Object.keys(e),g=document.getElementById("ladtopic-container-0").offsetWidth,h={top:15,right:10,bottom:20,left:10},i=function(a,i,j,k,l,m){b=i.bubbleChart("#timeline-chart"),this.chart=function(){return b},l.forEach(function(a,b){a.date=new Date(1e3*a.utc),a.action_type=f.indexOf(a.action_type)});var n=j(l),o=n.dimension(function(a){return[a.date,a.action_type,a.action]}),p=o.group().reduce(function(a,b){return++a.count,a.date=b.date,a.action=b.action,a.action_type=b.action_type,a},function(a,b){return--a.count,a.date=b.date,a.action=b.action,a.action_type=b.action_type,a},function(){return{count:0,date:0,action:"",action_type:""}});this.getGroup=function(){return p};var q=[a.min(p.all(),function(a){return a.key[0]}),a.max(p.all(),function(a){return a.key[0]})];q[1]=k(q[1]).isSameOrBefore(new Date)?new Date:q[1],this.getXRange=function(){return q};for(var r=a.max(p.all(),function(a){return a.value.count}),s=a.scaleOrdinal().domain(f).range(c),t=[],u=0;u<l.length;u++)t.push(l[u].action_type);var v=t.filter(function(a,b,c){return c.indexOf(a)===b}).length;v=v<2?5:v,b.width(g).height(20*v).margins({top:10,bottom:20,left:h.left,right:h.right}).clipPadding(65).renderLabel(!1).minRadius(1).maxBubbleRelativeSize(.3).x(a.scaleTime().domain(q).range([0,g])).brushOn(!0).dimension(o).group(p).renderHorizontalGridLines(!0).keyAccessor(function(a){return a.value.date}).valueAccessor(function(a){return a.value.action_type}).radiusValueAccessor(function(a){return a.value.count/r}).colors(s).title(function(a){return["Am "+m.formatDate(a.value.date)," haben Sie "+m.numberToWord(a.value.count,"mal")," das "+e[f[a.value.action_type]]," "+d[a.value.action]].join("")}).xAxis(a.axisBottom().ticks(10)),this.update=function(c){b.x(a.scaleTime().domain(c)),b.render()},b.render(),b.selectAll(".axis.y .tick").attr("transform","translate(50,0)").style("transition-duration","0"),b.on("pretransition",function(){b.selectAll("line.grid-line").attr("y2",b.effectiveHeight())}),b.elasticY(!0).yAxisPadding(0).yAxis().ticks(v).tickFormat(function(a){if(a===Math.ceil(a))return e[f[a]]}),b.on("renderlet",function(b){var c=a.select("#timeline-chart svg");c.select("g.y").style("transition-duration","0").attr("transform","translate(35,10)"),c.selectAll("g.y g.tick text").attr("text-anchor","start").attr("class","timeline-y-label")})};return localStorage.surveyDone?(a(".activity-chart-container").show(),a(".filter-chart-container").show()):(a(".activity-chart-container").hide(),a(".filter-chart-container").hide()),window.onresize=function(a){g=document.getElementById("planing-component").offsetWidth,i.chart.width(g).transitionDuration(0),i.chart.group(i.getGroup())},i});