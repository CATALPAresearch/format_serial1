define([],function(){var a="",b=["#004C97","#004C97","#004C97","#004C97","#004C97","#004C97","#004C97"],c={viewed:"betrachtet",updates:"bearbeitet",deleleted:"gel√∂scht",created:"erstellt"},d={mod_forum:"Forum",mod_glossary:"Glossar",mod_wiki:"Wiki",mod_assignment:"Aufgabe",mod_studentquiz:"StudentQuiz",mod_quiz:"Quiz"},e=Object.keys(d),f=document.getElementById("planing-component").offsetWidth,g={top:15,right:10,bottom:20,left:10},h=function(h,i,j,k,l,m){a=i.bubbleChart("#timeline-chart"),l.forEach(function(a,b){a.date=new Date(1e3*a.utc),a.action_type=e.indexOf(a.action_type)});var n=j(l),o=n.dimension(function(a){return[a.date,a.action_type,a.action]}),p=o.group().reduce(function(a,b){return++a.count,a.date=b.date,a.action=b.action,a.action_type=b.action_type,a},function(a,b){return--a.count,a.date=b.date,a.action=b.action,a.action_type=b.action_type,a},function(){return{count:0,date:0,action:"",action_type:""}});this.getGroup=function(){return p};var q=[h.min(p.all(),function(a){return a.key[0]}),h.max(p.all(),function(a){return a.key[0]})];q[1]=k(q[1]).isSameOrBefore(new Date)?new Date:q[1],this.getXRange=function(){return q};for(var r=h.max(p.all(),function(a){return a.value.count}),s=h.scaleOrdinal().domain(e).range(b),t=[],u=0;u<l.length;u++)t.push(l[u].action_type);var v=t.filter(function(a,b,c){return c.indexOf(a)===b}).length;a.width(f).height(20*v).margins({top:10,bottom:20,left:g.left,right:g.right}).clipPadding(65).renderLabel(!1).minRadius(1).maxBubbleRelativeSize(.3).x(h.scaleTime().domain(q).range([0,f])).brushOn(!0).dimension(o).group(p).renderHorizontalGridLines(!0).keyAccessor(function(a){return a.value.date}).valueAccessor(function(a){return a.value.action_type}).radiusValueAccessor(function(a){return a.value.count/r}).colors(s).title(function(a){return["Am "+m.formatDate(a.value.date)," haben Sie "+m.numberToWord(a.value.count,"mal")," das "+d[e[a.value.action_type]]," "+c[a.value.action]].join("")}).xAxis(h.axisBottom().ticks(10)),this.update=function(b){a.x(h.scaleTime().domain(b))},a.render(),a.selectAll(".axis.y .tick").attr("transform","translate(50,0)").style("transition-duration","0"),a.on("pretransition",function(){a.selectAll("line.grid-line").attr("y2",a.effectiveHeight())}),a.elasticY(!0).yAxisPadding(0).yAxis().ticks(v).tickFormat(function(a){if(a===Math.ceil(a))return d[e[a]]}),a.on("renderlet",function(a){var b=h.select("#timeline-chart svg");b.select("g.y").style("transition-duration","0").attr("transform","translate(35,10)"),b.selectAll("g.y g.tick text").attr("text-anchor","start").attr("class","timeline-y-label")})};return window.onresize=function(b){f=document.getElementById("planing-component").offsetWidth,a.width(f).transitionDuration(0),a.group(h.getGroup())},h});