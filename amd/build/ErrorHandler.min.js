define(["jquery","core/ajax"],function(a,b){var c=function(){function a(b,c){if(this._options=c,b=a._validate(b),null!==b){var d=a._hash(b),e=!1;for(var f in a._hashes)if(d===a._hashes[f]){e=!0;break}e||(a._hashes.push(d),(a._console||"object"==typeof this._options&&this._options.console===!0)&&console.log("ErrorHandler: "+b),(a._alert||"object"==typeof this._options&&this._options.alert===!0)&&alert("ErrorHandler: "+b),(a._send||"object"==typeof this._options&&this._options.send===!0)&&this._send(b))}}return a.logWindowErrors=function(){window.addEventListener("error",function(b){try{var c={message:b.message?b.message:void 0,filename:b.filename?b.filename:void 0,lineno:b.lineno?b.lineno:void 0,colno:b.colno?b.colno:void 0};c=JSON.stringify(c),new a(c)}catch(d){}}),console.log("ErrorHandler initialized")},a.prototype._send=function(b){try{if("undefined"==typeof a.logger)throw new Error("No Logger registered");return a.logger.add("catched_error",b),!0}catch(c){return c=a._validate(c),null!==c&&(a._console||"object"==typeof this._options&&this._options.console===!0)&&console.log("ErrorHandler: "+b),!1}},a._validate=function(a){if(null===a)return null;if("number"==typeof a&&(a=a.toString()),"string"==typeof a&&a.length>0&&(a=JSON.stringify({message:a})),"object"==typeof a)if(a instanceof Error){var b={name:a.name?a.name:void 0,message:a.message?a.message:void 0,stack:a.stack?a.stack:void 0};a=JSON.stringify(b)}else a=a.toString();return a.length<1?null:a},a._hash=function(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return b},a._hashes=[],a._send=!0,a._console=!0,a._alert=!1,a}();return c});