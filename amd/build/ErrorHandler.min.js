define(["jquery","core/ajax"],(function(o,e){return function(){function o(e,n){if(this._options=n,null!==(e=o._validate(e))){var r=o._hash(e),t=!1;for(var s in o._hashes)if(r===o._hashes[s]){t=!0;break}t||(o._hashes.push(r),(o._console||"object"==typeof this._options&&!0===this._options.console)&&console.log("ErrorHandler: "+e),(o._alert||"object"==typeof this._options&&!0===this._options.alert)&&alert("ErrorHandler: "+e),(o._send||"object"==typeof this._options&&!0===this._options.send)&&this._send(e))}}return o.logWindowErrors=function(){window.addEventListener("error",(function(e){try{var n={type:"thrown_error",message:e.message?e.message:void 0,filename:e.filename?e.filename:void 0,lineno:e.lineno?e.lineno:void 0,colno:e.colno?e.colno:void 0};new o(n=JSON.stringify(n))}catch(o){}}))},o.logConsoleErrors=function(){console.error=function(){try{var e={type:"console_error",arguments:arguments};new o(e=JSON.stringify(e))}catch(o){}},console.warn=function(){try{var e={type:"console_warn",arguments:arguments};new o(e=JSON.stringify(e))}catch(o){}}},o.prototype._send=function(e){try{if(void 0===o.logger)throw new Error("No Logger registered");return o.logger.add("catched_error",e),!0}catch(n){return null!==(n=o._validate(n))&&(o._console||"object"==typeof this._options&&!0===this._options.console)&&console.log("ErrorHandler: "+e),!1}},o._validate=function(o){if(null===o)return null;if("number"==typeof o&&(o=o.toString()),"string"==typeof o&&o.length>0&&(o=JSON.stringify({message:o})),"object"==typeof o)if(o instanceof Error){var e={name:o.name?o.name:void 0,message:o.message?o.message:void 0,stack:o.stack?o.stack:void 0};o=JSON.stringify(e)}else o=o.toString();return o.length<1?null:o},o._hash=function(o){for(var e=0,n=0;n<o.length;n++){e=(e<<5)-e+o.charCodeAt(n),e&=e}return e},o._hashes=[],o._send=!0,o._console=!1,o._alert=!1,o}()}));