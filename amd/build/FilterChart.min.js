define(["jquery"],function(a){var b="",c=function(c,d,e,f,g,h,i,j){b=d.compositeChart("#filter-chart"),this.xRange=g,this.milestoneApp=h;for(var k=document.getElementById("ladtopic-container-0").offsetWidth,l={top:15,right:10,bottom:20,left:10},m=["#ffa500","ff420e","#80bd9e","#89da59","#004C97"],n=e([{date:new Date(2019,9,1),y:1},{date:new Date(2020,2,31),y:1}]),o=n.dimension(function(a){return a.date}),p=o.group().reduceCount(function(a){return[0,a.date,1]}),q=f.dimension(function(a){return a.date}),r=q.group().reduceCount(function(a){return a.date}),s=h.getMilestones(),t=0;t<s.length;t++)s[t].y=t%3+1;var u=e(s),v=u.dimension(function(a){return[a.status,a.end,a.y]}),w=v.group().reduceCount(function(a){return a.end});b.width(k).height(85).margins({top:10,bottom:15,left:l.left-10,right:l.right}).compose([d.barChart(b).dimension(o).group(p),d.barChart(b).dimension(q).group(r).barPadding(0).gap(0).alwaysUseRounding(!0),d.bubbleChart(b).dimension(v).group(w).keyAccessor(function(a){return a.key[1]}).valueAccessor(function(a){return a.key[2]}).radiusValueAccessor(function(){return.4}).colors(c.scaleOrdinal().domain(["urgent","missed","progress","ready","refelcted"]).range(m)).colorAccessor(function(a){return a.key[0]}).renderLabel(!1).renderTitle(!1)]).x(c.scaleTime().domain(g).range([0,k])).elasticX(!0).elasticY(!0).xAxisLabel("",3),b.xAxis(c.axisTop().ticks(10)),b.xAxis().tickFormat(i.multiFormat),b.yAxisLabel("",10).yAxis().ticks(2),b.x(c.scaleTime().domain(g).range([0,k])),b.xAxis(c.axisBottom().ticks(10));var x=this;b.on("filtered",function(){x.filterTime(x)}),b.on("renderlet",function(a){c.select("#filter-chart svg rect.selection").on("mouseup",function(){}),c.select("#filter-chart svg rect.selection").on("mousedown",function(){}),c.select("#filter-chart svg rect.overlay").on("mousedown",function(){j.add("timefilter_changed",{range:void 0===b.filters()[0]?this.xRange:b.filters()[0]})})}),b.render();var y=c.select("#filter-chart svg");y.insert("g",":first-child").attr("transform","translate(0, 10)").append("rect",":first-child").attr("class","filter-background").attr("width","100%").attr("height",58),localStorage.surveyDone?(a(".activity-chart-container").show(),a(".filter-chart-container").show()):(a(".activity-chart-container").hide(),a(".filter-chart-container").hide());var x=this;window.onresize=function(a){k=document.getElementById("planing-component").offsetWidth,b.width(k),x.filterTime(),b.render()},this.replaceFilter=function(a){b.replaceFilter(a)},this.filterTime=function(a){var c=void 0===b.filters()[0]?this.xRange:b.filters()[0];x.milestoneApp.updateChart(c);for(var d=0;d<z.length;d++)z[d].update(c);j.add("timefilter_changed",{range:c})};var z=[];this.registerChart=function(a){z.push(a)}};return c});