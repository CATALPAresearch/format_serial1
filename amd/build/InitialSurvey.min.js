define(["jquery"],function(a){var b=function(b,c,d,e,f){new b({el:"#planningsurvey",data:function(){return{modalSurveyVisible:!1,surveyComplete:!1,objectives:"",availableTime:0,selectedMonth:0,selectedYear:0,resources:[],availableResources:[],invalidAvailableTime:!1,invalidObjective:!1,invalidResources:!1}},mounted:function(){var a=this;e.get_ws("coursestructure",{courseid:parseInt(f.id,10)},function(b){try{a.availableResources=JSON.parse(b.data)}catch(b){console.error(b)}}),localStorage.surveyComplete&&(this.surveyComplete=localStorage.surveyComplete)},watch:{surveyComplete:function(a){localStorage.surveyComplete=a}},methods:{showModal:function(a){this.modalSurveyVisible=!0},closeModal:function(a){this.modalSurveyVisible=!1},monthRange:function(){return e.monthRange},yearRange:function(){return[2019,2020,2021,2022]},monthSelected:function(a){this.selectedMonth=a.target.value},yearSelected:function(a){this.selectedYear=a.target.value},resourceById:function(a){return this.availableResources.filter(function(b){return parseInt(b.id,10)===parseInt(a,10)})[0]},resourceSelected:function(a){this.resources.push(this.resourceById(a.target.value));var b=document.getElementById("selected_resources");c.create(b,{});this.invalidResources=!(this.resources.length>0)},resourceRemove:function(a){for(var b=0;b<this.resources.length;b++)this.resources[b].id===a&&this.resources.splice(b,1);this.invalidResources=!(this.resources.length>0)},updateObjective:function(a){this.invalidObjective=""===this.objectives},updateAvailableTime:function(){this.invalidAvailableTime=this.availableTime<=0},validateSurveyForm:function(){var a=!0;""===this.objectives&&(this.invalidObjective=!0,a=!1),this.availableTime<=0&&(this.invalidAvailableTime=!0,a=!1),"f1c"===this.objectives&&0===this.resources.length&&this.availableResources.length>0&&(this.invalidResources=!0,a=!1),a&&this.saveSurvey()},saveSurvey:function(){var b=new Date,c={},e={};switch(this.objectives){case"f1a":e=Object.assign({},c,{}),e.name="Pr√ºfung / Klausur",this.selectedMonth!==b.getMonth()&&this.selectedYear!==b.getFullYear()?e.end=this.selectedMonth+"/1/"+this.selectedYear:e.end="2,1,2020",e.resources=[],e.strategies=[],d.addMilestone(e);break;case"f1b":break;case"f1c":break;case"f1d":}d.surveyDone=!0,this.surveyComplete=!0,a("#theSurveyModal").modal("hide")}}})};return b});