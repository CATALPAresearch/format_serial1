define(["jquery","core/ajax"],function(a,b){var c=function(a,c,d){this.utils=a,this.courseid=c,this.name="log_ladtopics",this.options=a.mergeObjects({outputType:0,prefix:"",loggerServiceUrl:null,loggerServiceParams:{data:{}},context:"default-context"},d),this.ip="",this.add=function(a,b){var c={utc:(new Date).getTime(),location:{host:window.location.host,pathname:window.location.pathname,hash:window.location.hash,tabId:"APLE-MOODLE"===window.name.split("=")[0]?window.name.split("=")[1]:"unknown"},context:this.options.context,action:a,value:b};"open_planing_tool"===a&&(c.userAgent={cpu:navigator.oscpu,platform:navigator.platform,engine:navigator.product,browser:navigator.appCodeName,browserVersion:navigator.appVersion,userAgent:navigator.userAgent.replace(/,/gm,";"),screenHeight:screen.height,screenWidth:screen.width}),this.output(c)},this.validate=function(a){return a},this.getLogTime=function(){var a=new Date,b=a.getSeconds(),c=a.getMinutes(),d=a.getHours(),e=a.getDate(),f=a.getMonth()+1,g=a.getFullYear();return{utc:a.getTime(),date:g+"-"+(f<=9?"0"+f:f)+"-"+(e<=9?"0"+e:e),time:(d<=9?"0"+d:d)+":"+(c<=9?"0"+c:c)+":"+(b<=9?"0"+b:b)+":"+a.getMilliseconds()}},this.output=function(a){switch(this.options.outputType){case 0:console.log(a);break;case 1:this.sendLog(a)}},this.sendLog=function(a){b.call([{methodname:"format_ladtopics_logger",args:{data:{courseid:this.courseid,utc:Math.ceil(a.utc/1e3),action:a.action,entry:JSON.stringify(a)}},done:function(){},fail:function(){}}])}};return c});