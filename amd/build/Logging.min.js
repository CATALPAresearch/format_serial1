define(["jquery","core/ajax",M.cfg.wwwroot+"/course/format/ladtopics/amd/src/Utils.js"],(function(t,e,o){o=new o;return function(t,n){this.utils=o,this.courseid=t,this.name="log_ladtopics",this.options=this.utils.mergeObjects({outputType:0,prefix:"",loggerServiceUrl:null,loggerServiceParams:{data:{}},context:"default-context"},n),this.ip="",this.add=function(t,e){var o={utc:(new Date).getTime(),location:{host:window.location.host,pathname:window.location.pathname,hash:window.location.hash,tabId:"APLE-MOODLE"===window.name.split("=")[0]?window.name.split("=")[1]:"unknown"},context:this.options.context,action:t,value:e};"open_planing_tool"===t&&(o.userAgent={cpu:navigator.oscpu,platform:navigator.platform,engine:navigator.product,browser:navigator.appCodeName,browserVersion:navigator.appVersion,userAgent:navigator.userAgent.replace(/,/gm,";"),screenHeight:screen.height,screenWidth:screen.width}),this.output(o)},this.validate=function(t){return t},this.getLogTime=function(){var t=new Date,e=t.getSeconds(),o=t.getMinutes(),n=t.getHours(),i=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return{utc:t.getTime(),date:s+"-"+(a<=9?"0"+a:a)+"-"+(i<=9?"0"+i:i),time:(n<=9?"0"+n:n)+":"+(o<=9?"0"+o:o)+":"+(e<=9?"0"+e:e)+":"+t.getMilliseconds()}},this.output=function(t){switch(this.options.outputType){case 0:console.log(t);break;case 1:this.sendLog(t)}},this.sendLog=function(t){e.call([{methodname:"format_ladtopics_logger",args:{data:{courseid:this.courseid,utc:Math.ceil(t.utc/1e3),action:t.action,entry:JSON.stringify(t)}},done:function(){},fail:function(){}}])}}}));