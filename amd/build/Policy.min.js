/**
 * Main method of the plugin. Load depending javascript and css before starting the timeline dashboard.
 *
 * @module     format/ladtopics
 * @class      LADTopics
 * @copyright  2019 Niels Seidel <niels.seidel@fernuni-hagen.de>
 * @license    MIT
 * @since      3.1
 * 
 * TODO
 * - set link to policy text
 * - submit accept/withdraw
 */
define(["jquery",M.cfg.wwwroot+"/course/format/ladtopics/lib/build/vue.min.js",M.cfg.wwwroot+"/course/format/ladtopics/lib/build/moment-with-locales.min.js"],(function(n,i,e){return require.config({enforceDefine:!1,paths:{moment226:[M.cfg.wwwroot+"/course/format/ladtopics/lib/build/moment-with-locales.min"]},shim:{moment226:{exports:"moment"}}}),{init:function(n){return new i({el:"policy-container",data:function(){return{policies:n}},mounted:function(){},methods:{accept:function(){},convertTime:function(n){return e.unix(n).format("DD.MM.YYYY")},getLink:function(n,i){return M.cfg.wwwroot+"/course/format/ladtopics/policy.php?policy="+n.id+"&version="+n.version+"&action="+i}},template:'\n                            <div id="policy-container">\n                                <h3 class="my-4">Zustimmung und Wideruf zur Datenverarbeitung</h3>\n                                <div class="mb-3" v-for="p in policies">\n                                    \x3c!-- \n                                    href="http://127.0.0.1/moodle/admin/tool/policy/view.php?policyid=1&versionid=9&returnurl=http%3A%2F%2F127.0.0.1%2Fmoodle%2Fadmin%2Ftool%2Fpolicy%2Fuser.php%3Fuserid%3D2"\n                                    --\x3e\n                                    <a target="s" class="bold">{{p.name}}</a> in der Version vom \n                                    <span class="">{{ convertTime(p.creation) }}</span>\n                                    \n                                    <span v-if="p.status==1">\n                                        haben Sie \n                                         am <span class="">{{ convertTime(p.acceptance) }}</span>\n                                         zugestimmt <i class="fa fa-check ml-3"></i>\n                                        <a :href="getLink(p,0)" class="right btn btn-sm btn-outline-primary">Zustimmung widerufen</a></span>\n                                    <span v-if="p.status==0">\n                                        <i class="fa fa-times ml-3"></i>\n                                        <a :href="getLink(p,1)" class="btn btn-sm btn-primary">Akzeptieren</a>\n                                    </span>\n                                </div>\n                            </div>\n                        '})}}}));