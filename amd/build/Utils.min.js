define(["jquery","core/ajax"],function(a,b){const c=function(c,d){this.d3=d,this.dc=c,this.get_ws=function(c,d,e,f){f=void 0!==f&&f,b.call([{methodname:f?c:"format_ladtopics_"+c,args:d,done:function(b){b.hasOwnProperty("exception")?a("#alert").html("Die Prozedur "+c+" konnte nicht als Webservice geladen werden.<br>").append(JSON.stringify(b)):e(b)},fail:function(a){console.log(d,c),console.error(a)}}])},this.germanFormatters=d.timeFormatDefaultLocale({decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Jänner","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jän","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),this.customTimeFormat=function(a){return a.getMinutes()?d.timeFormat("%I:%M")(a):a.getMilliseconds()?d.timeFormat(".%L")(a):a.getSeconds()?d.timeFormat(":%S")(a):a.getHours()?d.timeFormat("%Hh")(a):a.getDay()?d.timeFormat("%a %e.%m.")(a):a.getMonth()?d.timeFormat("%B")(a):d.getDate("%Y")},this.monthRange=[{num:1,name:"Januar"},{num:2,name:"Feburar"},{num:3,name:"März"},{num:4,name:"April"},{num:5,name:"Mai"},{num:6,name:"Juni"},{num:7,name:"Juli"},{num:8,name:"August"},{num:9,name:"September"},{num:10,name:"Oktober"},{num:11,name:"November"},{num:12,name:"Dezember"}],this.numberToWord=function(a,b){switch(b=void 0===b?"":b,a){case 0:return"kein"+b;case 1:return"ein"+b;case 2:return"zwei"+b;case 3:return"drei"+b;case 4:return"vier"+b;case 5:return"fünf"+b;case 6:return"sechs"+b;case 7:return"sieben"+b;case 8:return"acht"+b;case 9:return"neun"+b;case 10:return"zehn"+b;case 11:return"elf"+b;default:return a+" "+b}};const e=d.timeFormatLocale({decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Jänner","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jän","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});this.formatMillisecond=e.format(".%L"),this.formatSecond=e.format(":%S"),this.formatMinute=e.format("%I:%M"),this.formatHour=e.format("%H:%M"),this.formatDay=e.format("%a %e.%m."),this.formatDate=e.format("%d.%m.%Y"),this.formatDate2=e.format("%d/%m/%Y"),this.formatWeek=e.format("%b %d"),this.formatWeekNum=e.format("%U"),this.formatMonth=e.format("%B"),this.formatYear=e.format("%Y"),this.multiFormat=function(a){return d.timeSecond(a)<a?this.formatMillisecond:d.timeMinute(a)<a?this.formatSecond:d.timeHour(a)<a?this.formatMinute:d.timeDay(a)<a?this.formatHour:d.timeMonth(a)<a?d.timeWeek(a)<a?this.formatDay:this.formatWeek:d.timeYear(a)<a?this.formatMonth:this.formatYear},this.addFilterChart=function(a,b){const d=this.d3.scale.ordinal().domain([0]).range(["#e6550d"]),e=130;var f=b.dimension(function(b){return b[a.indepVar]}),g=f.group().reduceSum(function(b){return+b[a.depVar]}),h=void 0===a.margins?{top:0,right:5,bottom:20,left:2}:a.margins,i=void 0===a.colors?d:a.colors,j=void 0;switch(console.log("group",g),console.log("dim",f.group()),a.chartType){case"rowChart":j=c.rowChart(a.selector),j.xAxis().ticks(4),j.margins(h).height(e);break;case"pieChart":j=c.pieChart(a.selector),j.innerRadius(20).height(100)}j.dimension(f).group(g).colors(i).title(function(b){return a.indepVar.charAt(0).toUpperCase()+a.indepVar.slice(1,a.indepVar.length)+": "+b.key+"\nValue: "+b.value}).label(function(b){return a.keys[b.key]||b.key}),this.register(j)},this.charts=[],this.register=function(a){this.charts.push(a)},this.resetCharts=function(){for(var a=0;a<this.charts.length;a++)console.log(this.charts[a]),this.charts[a].filterAll();c.redrawAll()}};return c});