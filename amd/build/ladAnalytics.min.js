define(["jquery","core/ajax",M.cfg.wwwroot+"/course/format/ladtopics/lib/build/vue.min.js",M.cfg.wwwroot+"/course/format/ladtopics/lib/build/moment-with-locales.min.js"],(function(e,t,n,a){return require.config({enforceDefine:!1,paths:{d3:[M.cfg.wwwroot+"/course/format/ladtopics/lib/build/d3.v4.min"]},shim:{dc:{deps:["d3"]}}}),e("#page-header").hide(),e("#page-content").css("margin-top","57px"),{init:function(s){require(["d3"],(function(r){const i=n.component("piechart",{props:["chartData","color"],mounted:function(){const t=r.select("#"+this.id).append("svg").style("width","50%").style("font","10px sans-serif").style("box-sizing","border-box");if("object"!=typeof this.chartData||null===this.chartData||this.chartData.length<=0)return;const n=this;e(document).ready((function(){const a=e("#"+n.id).find("svg").width(),s=a/2;t.style("height",s+"px");const i=Math.min(a,s)/2;t.append("g").attr("transform","translate("+a+","+s+")");var l=r.scaleOrdinal().range(n.color),o=r.arc().outerRadius(i-10).innerRadius(0),c=r.arc().outerRadius(i-40).innerRadius(i-40),d=r.pie().sort(null).value((function(e){return e.value})),u=t.selectAll(".arc").data(d(n.chartData)).enter().append("g").attr("class","arc").attr("transform","translate("+a/2+","+s/2+")");u.append("path").attr("d",o).style("fill",(function(e){return l(e.index)})),u.append("text").attr("transform",(function(e){return"translate("+c.centroid(e)+")"})).attr("dy",".35em").text((function(e){return e.data.name+" ("+e.value+")"}))}))},data:function(){return{id:"_"+Math.random().toString(36).substr(2,9)}},computed:{svgElement:function(){return this.svg.node()}},template:'<div v-bind:id="id"></div>'}),l=n.component("barchart",{props:["chartData","max"],mounted:function(){const t=r.select("#"+this.id).append("svg").style("width","50%").style("font","10px sans-serif").style("box-sizing","border-box");if("object"!=typeof this.chartData||null===this.chartData||this.chartData.length<=0)return;const n=this;e(document).ready((function(){const a=e("#"+n.id).find("svg").width(),s=a/2;t.style("height",s+"px");const i=a-60,l=s-60;t.append("g").attr("transform","translate(30,30)");var o=r.scaleBand().range([0,i]).padding(.1),c=r.scaleLinear().range([l,0]),d=n.chartData;d.sort((function(e,t){return t.count-e.count})),o.domain(d.map((function(e){return e.name}))),c.domain([0,r.max(d,(function(e){return e.value}))]),t.selectAll(".bar").data(d).enter().append("rect").attr("fill","rgb(55, 58, 60)").attr("class","bar").attr("x",(function(e){return o(e.name)})).attr("width",o.bandwidth()).attr("y",(function(e){return c(e.value)})).attr("height",(function(e){return l-c(e.value)})).attr("transform","translate(30,30)"),t.append("g").attr("transform","translate(30,"+(30+l)+")").call(r.axisBottom(o)),t.append("g").attr("transform","translate(30,30)").call(r.axisLeft(c))}))},data:function(){return{id:"_"+Math.random().toString(36).substr(2,9)}},computed:{svgElement:function(){return this.svg.node()}},template:'<div v-bind:id="id"></div>'}),o=n.component("graphtree",{props:["chartData"],mounted:function(){const t=r.select("#"+this.id).append("svg").style("width","100%").style("padding","10px").style("font","10px sans-serif").style("box-sizing","border-box");if("object"!=typeof this.chartData||null===this.chartData||this.chartData.length<=0)return;const n=this;var a=this.chartData;e(document).ready((function(){const s=e("#"+n.id).find("svg");width=s.width();const i=width/2;t.style("height",i+"px");const l=width-100,o=i-100,c=r.tree().size([l,o]);let d=r.hierarchy(a);d=c(d),g=t.append("g").attr("transform","translate(50,50)");g.selectAll(".link").data(d.descendants().slice(1)).enter().append("path").attr("class","link").attr("fill","none").attr("stroke","black").attr("d",(function(e){return"M"+e.x+","+e.y+"C"+e.x+","+(e.y+e.parent.y)/2+" "+e.parent.x+","+(e.y+e.parent.y)/2+" "+e.parent.x+","+e.parent.y}));const u="tooltip_"+Math.random().toString(36).substr(2,9);let p=r.select("body").append("div").attr("id",u);e("#"+u).css({backgroundColor:"white",display:"none",padding:"5px 10px",opacity:.9});var m=g.selectAll(".node").data(d.descendants()).enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));m.append("circle").attr("r",10).attr("fill",(function(e){return e.data.color?e.data.color:"black"})).attr("stroke-width","2px").on("mouseover",(function(t){const n=t.data;"string"==typeof n.tooltip&&(p.html(n.tooltip),e("#"+u).css({display:"inline-block",position:"absolute",left:r.event.pageX+20+"px",top:r.event.pageY+"px"}))})).on("mouseout",(function(t){"string"==typeof t.data.tooltip&&e("#"+u).css({display:"none"})})),m.append("text").attr("dy",".35em").attr("y",(function(e){return e.children?-20:20})).style("text-anchor","middle").text((function(e){return e.data.name}))}))},data:function(){return{id:"_"+Math.random().toString(36).substr(2,9)}},computed:{svgElement:function(){return this.svg.node()}},template:'<div v-bind:id="id"></div>'});return new n({el:"analytics-dashboard",data:{courseid:+s,users:[],currentPage:"user",currentUser:null,completeData:{}},components:{graphtree:o,barchart:l,piechart:i},mounted:function(){const e=this;this.getAPIData("analytics",{courseid:this.courseid}).then((function(t){const n=t;if("object"!=typeof n||"string"!=typeof n.data&&n.data.length<=0)return void console.warn("Could not fetch data.");const a=JSON.parse(n.data);if("object"!=typeof a)return void console.warn("Could not fetch data.");e.users=a;const s=a;var r={},i={urgent:0,ready:0,progress:0,missed:0,reflected:0,sum:0},l={availTime:{},objectives:{},planingStyle:{}};for(let e in s){const t=s[e];if("object"==typeof t.lime)for(let e in t.lime){const n=t.lime[e];"object"==typeof n&&("object"!=typeof r[n.survey_id]?r[n.survey_id]={id:+n.id,name:n.name,survey_id:+n.survey_id,count:1}:r[n.survey_id].count++)}if("object"==typeof t.milestones&&"object"==typeof t.milestones.elements){const e=t.milestones.elements;for(let t in e){switch(e[t].status){case"urgent":i.urgent++;break;case"ready":i.ready++;break;case"progress":i.progress++;break;case"missed":i.missed++;break;case"reflected":i.reflected++}i.sum++}}if("object"==typeof t.initialSurvey){const e=t.initialSurvey;"number"==typeof l.availTime[e.availableTime]?l.availTime[e.availableTime]++:l.availTime[e.availableTime]=1,"number"==typeof l.objectives[e.objectives]?l.objectives[e.objectives]++:l.objectives[e.objectives]=1,"number"==typeof l.planingStyle[e.planingStyle]?l.planingStyle[e.planingStyle]++:l.planingStyle[e.planingStyle]=1}}e.completeData.survey=l,e.completeData.milestones=i,e.completeData.lime=r,e.completeData.users=s.length}),(function(e){}))},computed:{showHome:function(){return"home"===this.currentPage},showUser:function(){return"user"===this.currentPage}},methods:{getAPIData:function(e,n={}){return new Promise((function(a,s){t.call([{methodname:"format_ladtopics_"+e,args:n,timeout:3e3,done:function(e){return a(e)},fail:function(e){return s(e)}}])}))},getPlaningStyleData:function(){let e=[];if("number"==typeof this.completeData.survey.planingStyle["planing-style-a"]){let t={name:"Nur für eine Woche.",value:this.completeData.survey.planingStyle["planing-style-a"]};e.push(t)}else{let t={name:"Nur für eine Woche.",value:0};e.push(t)}if("number"==typeof this.completeData.survey.planingStyle["planing-style-b"]){let t={name:"Für die nächsten 4 Wochen.",value:this.completeData.survey.planingStyle["planing-style-b"]};e.push(t)}else{let t={name:"Für die nächsten 4 Wochen.",value:0};e.push(t)}if("number"==typeof this.completeData.survey.planingStyle["planing-style-c"]){let t={name:"Für das ganze Semester mit Arbeitspaketen für je eine Woche.",value:this.completeData.survey.planingStyle["planing-style-c"]};e.push(t)}else{let t={name:"Für das ganze Semester mit Arbeitspaketen für je eine Woche.",value:0};e.push(t)}if("number"==typeof this.completeData.survey.planingStyle["planing-style-d"]){let t={name:"Für das ganze Semester mit Arbeitspaketen für je 2 Wochen.",value:this.completeData.survey.planingStyle["planing-style-d"]};e.push(t)}else{let t={name:"Für das ganze Semester mit Arbeitspaketen für je 2 Wochen.",value:0};e.push(t)}if("number"==typeof this.completeData.survey.planingStyle["planing-style-e"]){let t={name:"Für das ganze Semester mit Arbeitspaketen für je einen Monat.",value:this.completeData.survey.planingStyle["planing-style-e"]};e.push(t)}else{let t={name:"Für das ganze Semester mit Arbeitspaketen für je einen Monat.",value:0};e.push(t)}if("number"==typeof this.completeData.survey.planingStyle["planing-style-f"]){let t={name:"Keine Angaben",value:this.completeData.survey.planingStyle["planing-style-f"]};e.push(t)}else{let t={name:"Keine Angaben",value:0};e.push(t)}return e},getTimePieData:function(){let e=[];if("object"==typeof this.completeData.survey.availTime)for(let t in this.completeData.survey.availTime){const n={name:t,value:this.completeData.survey.availTime[t]};e.push(n)}return e},getPlanPieData:function(){let e=[];if("number"==typeof this.completeData.survey.objectives.f1a){const t={name:"Prüfung",value:this.completeData.survey.objectives.f1a};e.push(t)}else{const t={name:"Prüfung",value:0};e.push(t)}if("number"==typeof this.completeData.survey.objectives.f1b){const t={name:"Orientierung",value:this.completeData.survey.objectives.f1b};e.push(t)}else{const t={name:"Orientierung",value:0};e.push(t)}if("number"==typeof this.completeData.survey.objectives.f1c){const t={name:"Interesse",value:this.completeData.survey.objectives.f1c};e.push(t)}else{const t={name:"Interesse",value:0};e.push(t)}if("number"==typeof this.completeData.survey.objectives.f1d){const t={name:"Keine Angabe",value:this.completeData.survey.objectives.f1d};e.push(t)}else{const t={name:"Keine Angabe",value:0};e.push(t)}return e},getMileStonePieData:function(){let e=[];return"number"==typeof this.completeData.milestones.urgent&&e.push({name:"Dringlich",value:this.completeData.milestones.urgent}),"number"==typeof this.completeData.milestones.missed&&e.push({name:"Abgelaufen",value:this.completeData.milestones.missed}),"number"==typeof this.completeData.milestones.progress&&"number"==typeof this.completeData.milestones.ready&&e.push({name:"Bereit",value:this.completeData.milestones.progress+this.completeData.milestones.ready}),"number"==typeof this.completeData.milestones.reflected&&e.push({name:"Reflektiert",value:this.completeData.milestones.reflected}),e},getLimeSurveyData:function(){let e=[];if("object"==typeof this.completeData.lime)for(let t in this.completeData.lime){const n={name:this.completeData.lime[t].name,value:+this.completeData.lime[t].count};e.push(n)}return e},setCurrentPage:function(e){this.currentPage=e},setUser:function(e){this.currentUser=e},convertUnix:function(e){return a.unix(e).format("DD.MM.YYYY HH:mm")},convertMoment:function(e){return a(e).format("DD.MM.YYYY")},cleanTitle:function(e){return e=((e=(e+"").toLowerCase())+"").replace(/^([a-z])|\s+([a-z])/g,(function(e){return e.toUpperCase()}))},getMSStatus:function(e){switch(e){case"urgent":return"dringlich";case"ready":return"bereit";case"missed":return"abgelaufen";case"reflected":return"reflektiert"}},translatePlaningStyle:function(e){switch(e){case"planing-style-a":return"Nur für eine Woche.";case"planing-style-b":return"Für die nächsten 4 Wochen.";case"planing-style-c":return"Für das ganze Semester mit Arbeitspaketen für je eine Woche.";case"planing-style-d":return"Für das ganze Semester mit Arbeitspaketen für je 2 Wochen.";case"planing-style-e":return"Für das ganze Semester mit Arbeitspaketen für je einen Monat.";case"planing-style-f":return"Keine Angaben";default:return"Unbekannt"}},translateGoal:function(e){switch(e){case"f1a":return"Die Prüfung erfolgreich absolvieren.";case"f1b":return"Orientierung im Themengebiet erlangen.";case"f1c":return"Meinen eigenen Interessen bzgl. bestimmter Themengebiete nachgehen.";case"f1d":return"Keine Angaben";default:return"Unbekannt"}},createMSTreeData(){if("object"!=typeof this.currentUser||"object"!=typeof this.currentUser.milestones||"object"!=typeof this.currentUser.milestones.elements||this.currentUser.milestones.elements.length<1)return null;if("number"!=typeof+this.currentUser.milestones.modified)return null;const e=+this.currentUser.milestones.modified,t=""+a.unix(e).format("DD.MM.YYYY"),n=this.currentUser.milestones.elements,s={name:"dringlich",children:[],type:"status",color:"#FDF7C2",tooltip:0},r={name:"bereit",children:[],type:"status",color:"#70A1D7",tooltip:0},i={name:"abgelaufen",children:[],type:"status",color:"#FF6961",tooltip:0},l={name:"reflektiert",children:[],type:"status",color:"#A1DE93",tooltip:0};for(let e in n){const t=n[e];let a=[],o='<ul style="list-style-type: none; padding-left: 0px;">';for(let e in t.resources){const n=t.resources[e];o+=`<li>${n.instance_title} [<i>${this.cleanTitle(n.instance_type)}</i>]</li>`,a.push({name:n.instance_title,color:"#957DAD",type:"ressource",tooltip:`${this.cleanTitle(n.instance_title)} [<i>${this.cleanTitle(n.instance_type)}</i>]`})}o+="</ul>";const c={name:t.name,tooltip:`\n                                                    <table>\n                                                        <tr>\n                                                            <td>Titel:</td>\n                                                            <td>${t.name}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td>Lernziel:</td>\n                                                            <td>${t.objective}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td>Beginn:</td>\n                                                            <td>${this.convertMoment(t.start)}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td>Termin:</td>\n                                                            <td>${this.convertMoment(t.end)}</td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td style="vertical-align: top;">Ressourcen:&nbsp;&nbsp;</td>\n                                                            <td>${o}</td>\n                                                        </tr>\n                                                    </table>\n                                                `,children:a,color:"#84CED2"};switch(t.status){case"urgent":s.children.push(c),s.tooltip++;break;case"missed":i.children.push(c),i.tooltip++;break;case"reflected":l.children.push(c),l.count++;break;case"progress":case"ready":r.children.push(c),r.tooltip++}}const o=[];return o.push(r),o.push(s),o.push(i),o.push(l),r.tooltip=r.tooltip+" Meilenstein(e)",s.tooltip=s.tooltip+" Meilenstein(e)",i.tooltip=i.tooltip+" Meilenstein(e)",l.tooltip=l.tooltip+" Meilenstein(e)",{name:t,children:o,type:"root",tooltip:n.length+" Meilenstein(e)"}}},template:'\n                                <div>\n                                    <nav class="navbar navbar-expand-lg navbar-light bg-primary">\n                                        <a class="navbar-brand" href="#"><span class="text-white">LADTopics Analytics Dashboard</span></a>\n                                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">\n                                            <span class="navbar-toggler-icon"></span>\n                                        </button>\n                                        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">\n                                            <div class="navbar-nav">\n                                                <a class="nav-item nav-link active" v-on:click="setCurrentPage(\'home\')" href="#"><span class="text-white">Gesamtübersicht</span></a>\n                                                <a hidden class="nav-item nav-link" v-on:click="setCurrentPage(\'user\')" href="#"><span class="text-white">Einzelansicht</span></a>\n                                                \x3c!-- <a class="nav-item nav-link" href="#"><span class="text-white">Self-Assessment</span></a> --\x3e\n                                            </div>\n                                        </div>                  \n                                    </nav>\n                                    \x3c!-- Home Dashboard --\x3e\n                                    <div class="my-2 px-1 bg-secondary" v-if="showHome">\n                                        <div class="px-2 pt-2">\n                                            <h4><b>Eingangsbefragung</b></h4>\n                                            <div><b>Verfolgte Ziele</b></div>\n                                            <piechart v-bind:chartData="getPlanPieData()" v-bind:color="[\'#FDF7C2\', \'#FF6961\', \'#70A1D7\', \'#A1DE93\']"></piechart>\n                                            <table class="table table-responsive">\n                                                <tr>\n                                                    <td>Prüfung</td>\n                                                    <td>Orientierung</td>\n                                                    <td>Interesse</td>\n                                                    <td>Keine Angabe</td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="text-center">{{ completeData[\'survey\'].objectives.f1a ? completeData[\'survey\'].objectives.f1a : 0 }}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'].objectives.f1b ? completeData[\'survey\'].objectives.f1b : 0 }}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'].objectives.f1c ? completeData[\'survey\'].objectives.f1c : 0 }}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'].objectives.f1d ? completeData[\'survey\'].objectives.f1d : 0 }}</td>\n                                                </tr>\n                                            </table>\n                                            <div><b>Geplante Lernstunden pro Woche</b></div>\n                                            <barchart v-bind:chartData="getTimePieData()" v-bind:max="completeData[\'users\']"></barchart>\n                                            <table class="table table-responsive">\n                                                <tr>                                                   \n                                                    <td v-for="(count, index) in completeData[\'survey\'].availTime">{{index}} Stunde(n)</td>\n                                                </tr>\n                                                <tr>\n                                                    <td v-for="(count, index) in completeData[\'survey\'].availTime" class="text-center">{{count}}</td>\n                                                </tr>\n                                            </table>\n                                            <div><b>Zeitraum der Lernaktivitätsplanung</b></div>\n                                            <piechart v-bind:chartData="getPlaningStyleData()" v-bind:color="[\'#8DA290\', \'#DEE2D9\', \'#FCF1D8\', \'#F2CBBB\', \'#EAEBFF\', \'#D3EEFF\']"></piechart>\n                                            <table class="table table-responsive">\n                                                <tr>\n                                                    <td>Nur für eine Woche.</td>                                                                    \n                                                    <td>Für die nächsten 4 Wochen.</td>                                                               \n                                                    <td>Für das ganze Semester mit Arbeitspaketen für je eine Woche.</td>\n                                                    <td>Für das ganze Semester mit Arbeitspaketen für je 2 Wochen.</td>\n                                                    <td>Für das ganze Semester mit Arbeitspaketen für je einen Monat.</td>\n                                                    <td>Keine Angaben</td>    \n                                                </tr>\n                                                <tr>\n                                                    <td class="text-center">{{ completeData[\'survey\'][\'planingStyle\'][\'planing-style-a\'] ? completeData[\'survey\'][\'planingStyle\'][\'planing-style-a\'] : 0 }}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'][\'planingStyle\'][\'planing-style-b\'] ? completeData[\'survey\'][\'planingStyle\'][\'planing-style-b\'] : 0 }}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'][\'planingStyle\'][\'planing-style-c\'] ? completeData[\'survey\'][\'planingStyle\'][\'planing-style-c\'] : 0}}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'][\'planingStyle\'][\'planing-style-d\'] ? completeData[\'survey\'][\'planingStyle\'][\'planing-style-d\'] : 0}}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'][\'planingStyle\'][\'planing-style-e\'] ? completeData[\'survey\'][\'planingStyle\'][\'planing-style-e\'] : 0}}</td>\n                                                    <td class="text-center">{{ completeData[\'survey\'][\'planingStyle\'][\'planing-style-f\'] ? completeData[\'survey\'][\'planingStyle\'][\'planing-style-f\'] : 0 }}</td>\n                                                </tr>                                   \n                                            </table>\n                                            <h4><b>LimeSurvey Umfragen</b></h4>\n                                            <barchart v-bind:chartData="getLimeSurveyData()" v-bind:max="completeData[\'users\']"></barchart>\n                                            <table class="table table-responsive">\n                                                <tr>\n                                                    <td>ID</td>\n                                                    <td>Name</td>\n                                                    <td>LS-ID</td>\n                                                    <td>Einreichungen</td>\n                                                </tr>                                                \n                                                <tr v-for="surv in completeData[\'lime\']" v-bind:id="surv.id">\n                                                    <td class="text-center">{{ surv.id }}</td>\n                                                    <td class="text-center">{{ surv.name }}</td>\n                                                    <td class="text-center">{{ surv.survey_id }}</td>\n                                                    <td class="text-center">{{ surv.count }}/{{ completeData[\'users\'] }}</td>\n                                                </tr>\n                                            </table>\n                                            <h4><b>Meilensteine</b></h4>\n                                            <piechart v-bind:chartData="getMileStonePieData()" v-bind:color="[\'#FDF7C2\', \'#FF6961\', \'#70A1D7\', \'#A1DE93\']"></piechart>\n                                            <table class="table table-responsive">\n                                                <tr>\n                                                    <td>Dringlich</td>\n                                                    <td>Bereit</td>\n                                                    <td>Abgelaufen</td>\n                                                    <td>Reflektiert</td>\n                                                    <td>Gesamt</td>\n                                                    <td>Durchschnitt pro Benutzer*in</td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="text-center">{{ completeData[\'milestones\'].urgent }}</td>\n                                                    <td class="text-center">{{ completeData[\'milestones\'].ready + completeData[\'milestones\'].progress }}</td>\n                                                    <td class="text-center">{{ completeData[\'milestones\'].missed }}</td>\n                                                    <td class="text-center">{{ completeData[\'milestones\'].reflected }}</td>\n                                                    <td class="text-center">{{ completeData[\'milestones\'].sum }}</td>\n                                                    <td class="text-center">{{ completeData[\'milestones\'].sum / completeData[\'users\'] }}</td>\n                                                </tr>\n                                            </table>\n                                        </div>\n                                    </div>\n                                    \x3c!-- User Dashboard --\x3e\n                                    <div hidden class="py-2">\n                                        <div class="container-fluid">\n                                            <div class="row">\n                                                <div id="userContent" class="col-8 bg-secondary">\n                                                    <div v-if="currentUser !== null" class="px-4 py-3" >\n                                                        <h2 style="margin-bottom: 0px;"><b>{{currentUser.firstname+" "+currentUser.lastname}}</b></h2>\n                                                        <span><<i>{{currentUser.email}}</i>></span>\n                                                        <table class="table table-responsive">\n                                                            <tbody>\n                                                                <tr>                                                            \n                                                                    <td style="border-top-style: none;"><i class="fa fa-calendar-alt"></i> Erster Login {{ convertUnix(currentUser.firstaccess) }}</td>   \n                                                                    <td style="border-top-style: none;"><i class="fa fa-clock"></i> Letzter Login {{ convertUnix(currentUser.lastaccess) }}</td>\n                                                                    <td style="border-top-style: none;">\n                                                                        <i class="fa fa-check text-danger" v-if="currentUser.suspended == true"></i>\n                                                                        <i class="fa fa-times text-success" v-if="currentUser.suspended == false"></i>\n                                                                        Suspendiert\n                                                                    </td>\n                                                                    <td style="border-top-style: none;">\n                                                                        <i class="fa fa-check text-danger" v-if="currentUser.deleted == true"></i>\n                                                                        <i class="fa fa-times text-success" v-if="currentUser.deleted == false"></i>\n                                                                        Gelöscht\n                                                                    </td>\n                                                                </tr>                                                       \n                                                            </tbody>\n                                                        </table>\n                                                        <h4><b>Semesterplanung</b></h4>\n                                                        <table class="table table-responsive">\n                                                            <tbody>\n                                                                <tr>\n                                                                    <td style="border-top-style: none;">Verfolgtes Ziel</td>\n                                                                    <td style="border-top-style: none;">{{ typeof currentUser === "object" && typeof currentUser.initialSurvey === "object" && currentUser.initialSurvey !== null ? translateGoal(currentUser.initialSurvey.objectives) : "-" }}</td>\n                                                                </tr>\n                                                                <tr>\n                                                                    <td style="border-top-style: none;">Geplante Lernstunden pro Woche</td>\n                                                                    <td style="border-top-style: none;">{{ typeof currentUser === "object" && typeof currentUser.initialSurvey === "object" && currentUser.initialSurvey !== null ? currentUser.initialSurvey.availableTime : "-" }}</td>\n                                                                </tr>\n                                                                <tr>\n                                                                    <td style="border-top-style: none;">Zeitraum der Lernaktivitätsplanung&nbsp;&nbsp;</td>\n                                                                    <td style="border-top-style: none;">{{ typeof currentUser === "object" && typeof currentUser.initialSurvey === "object" && currentUser.initialSurvey !== null ? translatePlaningStyle(currentUser.initialSurvey.planingStyle) : "-" }}</td>\n                                                                </tr>\n                                                            </tbody>\n                                                        </table>\n                                                        <h4><b>Abeschlossene Umfragen</b></h4>\n                                                        <table class="table table-responsive">\n                                                            <thead>\n                                                                <tr>\n                                                                    <td scope="col">#</td>\n                                                                    <td scope="col">Umfrage</td>\n                                                                    <td scope="col">Umfragen-ID</td>\n                                                                    <td scope="col">Einreichungs-ID</td>\n                                                                    <td scope="col">Einreichungsdatum</td>\n                                                                </tr>\n                                                            </thead>\n                                                            <tbody>\n                                                                <tr v-for="surv in currentUser.lime" v-bind:key="surv.id" >\n                                                                    <td>{{ surv.id }}</td>\n                                                                    <td>{{ surv.name }}</td>\n                                                                    <td>{{ surv.survey_id }}</td>\n                                                                    <td>{{ surv.submission_id }}</td>\n                                                                    <td>{{ convertUnix(surv.complete_date) }}</td>\n                                                                </tr>\n                                                            </tbody>\n                                                        </table>\n                                                        \x3c!-- graphtree --\x3e\n                                                        <h4><b>Meilensteine</b></h4>\n                                                        <div class="pb-1">Es sind <b>{{ currentUser.milestones.elements.length }}</b> Meilensteine vorhanden.</div>\n                                                        <graphtree v-bind:chartData="createMSTreeData()"></graphtree>                                                        \n                                                        \x3c!-- Milestone list --\x3e\n                                                        <h4>Liste aller Meilensteine</h4>\n                                                        <div id="mstones" v-if="currentUser.milestones !== null">\n                                                            <div class="card" v-for="milestone in currentUser.milestones.elements" v-bind:key="milestone.id">\n                                                                <div class="card-header" v-bind:id="\'heading-ms\'+milestone.id">\n                                                                    <h5 class="mb-0">\n                                                                        <button class="btn btn-link collapsed" data-toggle="collapse" v-bind:data-target="\'#collapse-ms\'+milestone.id" aria-expanded="false" v-bind:aria-controls="\'collapse-ms\'+milestone.id">\n                                                                            {{ milestone.name }}\n                                                                        </button>\n                                                                    </h5>\n                                                                </div>\n                                                                <div v-bind:id="\'collapse-ms\'+milestone.id" class="collapse" v-bind:aria-labelledby="\'collapse-ms\'+milestone.id" data-parent="#mstones">\n                                                                    <div class="card-body">\n                                                                        <table class="table table-responsive">\n                                                                            <tbody>                                                                        \n                                                                                <tr>\n                                                                                    <td>Lernziel</td>\n                                                                                    <td>{{ milestone.objective }}</td>\n                                                                                </tr>\n                                                                                <tr>\n                                                                                    <td>Status</td>\n                                                                                    <td>{{ getMSStatus(milestone.status) }}</td>\n                                                                                </tr>\n                                                                                <tr>\n                                                                                    <td>Beginn</td>\n                                                                                    <td>{{ convertMoment(milestone.start) }}</td>\n                                                                                </tr>\n                                                                                <tr>\n                                                                                    <td>Termin</td>\n                                                                                    <td>{{ convertMoment(milestone.end) }}</td>\n                                                                                </tr>\n                                                                                <tr>\n                                                                                    <td>Ressourcen</td>\n                                                                                    <td>\n                                                                                        <ul style="list-style-type:none; padding-left: 0px;">\n                                                                                            <li v-for="ressource in milestone.resources">\n                                                                                                <i class="fa fa-check text-success" v-if="ressource.checked === true"></i>\n                                                                                                <i class="fa fa-times text-danger" v-if="ressource.checked !== true"></i>\n                                                                                                {{ ressource.instance_title }}\n                                                                                                [<i>{{ cleanTitle(ressource.instance_type) }}</i>] \n                                                                                            </li>\n                                                                                        </ul>\n                                                                                    </td>\n                                                                                </tr>                                                                        \n                                                                            </tbody>\n                                                                        </table>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class="col-4 bg-secondary">\n                                                    <div class="form-group py-2">\n                                                        \x3c!-- <label for="chooseUser">Benutzer*in</label> --\x3e\n                                                        <select multiple class="form-control" id="chooseUser" style="min-height:300px;">\n                                                            <option v-for="user in users" v-bind:key="user.id" v-on:click="setUser(user)" >{{user.firstname+" "+user.lastname+" ("+user.username+")"}}</option>\n                                                        </select>\n                                                    </div>\n                                                </div>                                       \n                                            </div>\n                                        </div>\n                                    </div>  \n                                </div>\n                                '})}))}}}));